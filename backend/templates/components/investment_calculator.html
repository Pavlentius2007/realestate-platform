<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω–æ–≥–æ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ -->
<div id="investment-calculator-modal" class="fixed inset-0 z-[9999] flex items-center justify-center bg-black bg-opacity-50 hidden">
  <div class="bg-white rounded-3xl shadow-2xl p-8 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∫–Ω–æ–ø–∫–æ–π –∑–∞–∫—Ä—ã—Ç–∏—è -->
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-3xl font-bold font-heading text-gray-900">üí∞ {{ _("calculator.title") or "–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä" }}</h2>
      <button onclick="closeInvestmentCalculator()" class="text-gray-400 hover:text-gray-700 text-3xl font-light">&times;</button>
    </div>
    
    <div class="mb-6">
      <p class="text-lg text-gray-600">{{ _("calculator.subtitle") or "–†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π –≤ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å" }}</p>
    </div>
    
    <!-- –í–∞–ª—é—Ç–∞ -->
    <div class="mb-6">
      <label class="block text-sm font-medium mb-2">{{ _("calculator.currency") or "–í–∞–ª—é—Ç–∞" }}</label>
      <select id="currency" class="w-full border border-gray-300 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        <option value="THB">THB (–±–∞—Ç)</option>
        <option value="USD">USD ($)</option>
        <option value="RUB">RUB (‚ÇΩ)</option>
        <option value="CNY">CNY (¬•)</option>
      </select>
      <span id="currency-rate" class="text-xs text-gray-500 mt-1 block"></span>
    </div>
    
    <!-- –í–≤–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã -->
    <form id="investmentForm" class="space-y-6">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label class="block text-sm font-medium mb-2">{{ _("calculator.property_price") or "–°—Ç–æ–∏–º–æ—Å—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—ã" }}</label>
          <input type="number" id="price" class="w-full border border-gray-300 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent" min="0" required>
        </div>
        <div>
          <label class="block text-sm font-medium mb-2">{{ _("calculator.area") or "–ü–ª–æ—â–∞–¥—å, –º¬≤" }}</label>
          <input type="number" id="area" class="w-full border border-gray-300 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent" min="0" required>
        </div>
        <div>
          <label class="block text-sm font-medium mb-2">{{ _("calculator.deposit") or "–î–µ–ø–æ–∑–∏—Ç (THB –∏–ª–∏ %)" }}</label>
          <input type="number" id="deposit" class="w-full border border-gray-300 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent" min="0" value="100000">
        </div>
        <div>
          <label class="block text-sm font-medium mb-2">{{ _("calculator.contract_payment") or "–ö–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–π –ø–ª–∞—Ç—ë–∂ (%)" }}</label>
          <input type="number" id="contract" class="w-full border border-gray-300 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent" min="0" max="100" value="35">
        </div>
        <div>
          <label class="block text-sm font-medium mb-2">{{ _("calculator.installment") or "–†–∞—Å—Å—Ä–æ—á–∫–∞ –Ω–∞ —Å—Ç—Ä–æ–π–∫—É (%)" }}</label>
          <input type="number" id="installment" class="w-full border border-gray-300 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent" min="0" max="100" value="15">
        </div>
        <div>
          <label class="block text-sm font-medium mb-2">{{ _("calculator.registration") or "–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ (% –æ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏)" }}</label>
          <input type="number" id="registration" class="w-full border border-gray-300 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent" min="0" max="100" value="1.1">
        </div>
        <div>
          <label class="block text-sm font-medium mb-2">{{ _("calculator.sinking_fund") or "Sinking Fund" }}</label>
          <input type="number" id="sinking" class="w-full border border-gray-300 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent" min="0">
        </div>
        <div>
          <label class="block text-sm font-medium mb-2">{{ _("calculator.maintenance_fee") or "Maintenance Fee (–≤ –≥–æ–¥)" }}</label>
          <input type="number" id="maintenance" class="w-full border border-gray-300 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent" min="0">
        </div>
        <div>
          <label class="block text-sm font-medium mb-2">{{ _("calculator.price_growth") or "–ü—Ä–æ–≥–Ω–æ–∑ —Ä–æ—Å—Ç–∞ —Ü–µ–Ω—ã (% –≤ –≥–æ–¥)" }}</label>
          <input type="number" id="growth" class="w-full border border-gray-300 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent" min="0" value="12">
        </div>
        <div>
          <label class="block text-sm font-medium mb-2">{{ _("calculator.construction_years") or "–°—Ä–æ–∫ –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ (–ª–µ—Ç)" }}</label>
          <input type="number" id="years" class="w-full border border-gray-300 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent" min="1" value="3">
        </div>
        <div>
          <label class="block text-sm font-medium mb-2">{{ _("calculator.rental_yield") or "–î–æ—Ö–æ–¥ –æ—Ç –∞—Ä–µ–Ω–¥—ã (% –≤ –≥–æ–¥)" }}</label>
          <input type="number" id="rent_yield" class="w-full border border-gray-300 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent" min="0" value="7">
        </div>
      </div>
      
      <!-- –ö–Ω–æ–ø–∫–∏ -->
      <div class="flex gap-4 pt-4">
        <button type="button" onclick="closeInvestmentCalculator()" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-3 px-6 rounded-xl transition-colors">
          {{ _("common.cancel") or "–û—Ç–º–µ–Ω–∞" }}
        </button>
        <button type="button" id="calculate-btn" class="flex-1 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-semibold py-3 px-6 rounded-xl transition-colors">
          üí∞ {{ _("calculator.calculate") or "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å" }}
        </button>
      </div>
    </form>
    
    <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
    <div id="calc-results" class="mt-8 hidden">
      <h3 class="text-xl font-semibold mb-4">{{ _("calculator.results") or "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á—ë—Ç–∞" }}</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="bg-gray-50 rounded-xl p-4">
          <div class="font-medium text-gray-700">{{ _("calculator.total_invested") or "–ò—Ç–æ–≥–æ –≤–ª–æ–∂–µ–Ω–æ –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞:" }}</div>
          <div id="result-invested" class="text-lg font-bold text-gray-900"></div>
        </div>
        <div class="bg-gray-50 rounded-xl p-4">
          <div class="font-medium text-gray-700">{{ _("calculator.future_price") or "–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º–∞—è —Ü–µ–Ω–∞ —á–µ—Ä–µ–∑" }} <span id="result-years"></span> {{ _("calculator.years") or "–ª–µ—Ç:" }}</div>
          <div id="result-future-price" class="text-lg font-bold text-gray-900"></div>
        </div>
        <div class="bg-gray-50 rounded-xl p-4">
          <div class="font-medium text-gray-700">{{ _("calculator.profit") or "–ü—Ä–∏–±—ã–ª—å –Ω–∞ –º–æ–º–µ–Ω—Ç –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞:" }}</div>
          <div id="result-profit" class="text-lg font-bold text-green-600"></div>
        </div>
        <div class="bg-gray-50 rounded-xl p-4">
          <div class="font-medium text-gray-700">{{ _("calculator.rental_income") or "–î–æ—Ö–æ–¥ –æ—Ç –∞—Ä–µ–Ω–¥—ã –≤ –≥–æ–¥:" }}</div>
          <div id="result-rent" class="text-lg font-bold text-blue-600"></div>
        </div>
        <div class="bg-gray-50 rounded-xl p-4">
          <div class="font-medium text-gray-700">{{ _("calculator.roi_year") or "ROI –∑–∞ –≥–æ–¥:" }}</div>
          <div id="result-roi-year" class="text-lg font-bold text-purple-600"></div>
        </div>
        <div class="bg-gray-50 rounded-xl p-4">
          <div class="font-medium text-gray-700">{{ _("calculator.roi_total") or "ROI –∫ –æ–∫–æ–Ω—á–∞–Ω–∏—é —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞:" }}</div>
          <div id="result-roi-total" class="text-lg font-bold text-purple-600"></div>
        </div>
        <div class="bg-gray-50 rounded-xl p-4 md:col-span-2">
          <div class="font-medium text-gray-700">{{ _("calculator.price_per_sqm") or "–¶–µ–Ω–∞ –∑–∞ –º¬≤:" }}</div>
          <div id="result-price-m2" class="text-lg font-bold text-gray-900"></div>
        </div>
      </div>
      <div class="flex justify-center mt-6">
        <button id="download-pdf" class="bg-green-600 hover:bg-green-700 text-white font-semibold px-6 py-3 rounded-xl transition-colors">
          üìÑ {{ _("calculator.download_pdf") or "–°–∫–∞—á–∞—Ç—å PDF" }}
        </button>
      </div>
    </div>
  </div>
</div>

<script>
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
function closeInvestmentCalculator() {
  const modal = document.getElementById('investment-calculator-modal');
  if (modal) {
    modal.classList.add('hidden');
    document.body.style.overflow = 'auto';
  }
}

// –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –Ω–∞ overlay
document.addEventListener('DOMContentLoaded', function() {
  const modal = document.getElementById('investment-calculator-modal');
  if (modal) {
    modal.addEventListener('click', function(e) {
      if (e.target === modal) {
        closeInvestmentCalculator();
      }
    });
  }
  
  // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ ESC
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      closeInvestmentCalculator();
    }
  });
});
</script> 