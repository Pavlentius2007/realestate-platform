<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6" id="results">
  {% for property in properties %}
    <div class="bg-white rounded-2xl shadow-md overflow-hidden border border-gray-100 transition hover:shadow-lg">
      <img src="/static/images/{{ property.preview_image or 'default.jpg' }}" alt="{{ property.title }}"
           class="w-full h-48 object-cover">

      <div class="p-4 space-y-2">
        <!-- ğŸ’¸ Ğ¦ĞµĞ½Ğ° -->
        <div class="text-xl font-bold text-sber">
          à¸¿ {{ "{:,.0f}".format(property.price) }}
          {% if property.old_price and property.old_price > property.price %}
            <span class="text-sm text-gray-400 line-through ml-2">
              à¸¿ {{ "{:,.0f}".format(property.old_price) }}
            </span>
          {% endif %}
        </div>

        <!-- ğŸ¢ ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸ Ñ€Ğ°Ğ¹Ğ¾Ğ½ -->
        <h3 class="text-lg font-bold text-gray-800 truncate">{{ property.title }}</h3>
        <div class="text-gray-800 font-semibold text-sm truncate">ğŸ¢ {{ property.condo_name or "â€“" }}</div>
        <div class="text-gray-500 text-sm truncate">ğŸ“ {{ property.district or "â€“" }}, {{ property.location or "â€“" }}</div>

        <!-- ğŸ¿ Ğ¥Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸ -->
        <div class="flex justify-between text-xs text-gray-600 mt-2">
          <span>ğŸ§ {{ property.bedrooms or "â€“" }} ÑĞ¿Ğ°Ğ»ÑŒĞ½.</span>
          <span>ğŸš» {{ property.bathrooms or "â€“" }} Ğ²Ğ°Ğ½Ğ½.</span>
        </div>

        <div class="flex justify-between text-xs text-gray-600">
          <span>ğŸ“€ {{ property.area or "â€“" }} Ğ¼Â²</span>
          <span>ğŸ¢ {{ property.floor or "â€”" }} ÑÑ‚Ğ°Ğ¶</span>
        </div>

        <!-- ğŸ”— ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½ĞµĞµ -->
        <div class="pt-2 text-right">
          <a href="/{{ lang }}/properties/{{ property.id }}" class="text-sm text-sber-dark font-medium underline">ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½ĞµĞµ</a>
        </div>
      </div>
    </div>
  {% else %}
    <p class="text-gray-500 col-span-full text-center">ĞĞµÑ‚ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹ Ğ¿Ğ¾ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ğ¼.</p>
  {% endfor %}
</div>

<div id="loading-indicator" class="text-center py-6 hidden">
  <span class="text-gray-500 text-sm">Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°...</span>
</div>

{% if next_page %}
  <div class="text-center pt-6">
    <button
      hx-get="/{{ lang }}/properties/filter?page={{ next_page }}"
      hx-target="#results"
      hx-swap="afterend"
      class="bg-sber hover:bg-sber-dark text-white py-2 px-4 rounded-xl shadow">
      ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ ĞµÑ‰Ñ‘
    </button>
  </div>
{% endif %}

<script>
  document.body.addEventListener("htmx:beforeRequest", () => {
    document.getElementById("loading-indicator").classList.remove("hidden");
  });
  document.body.addEventListener("htmx:afterSwap", () => {
    document.getElementById("loading-indicator").classList.add("hidden");
  });
</script>
