{% extends 'base.html' %}

{% block title %}{{ _("rent.title") }}{% endblock %}

{% block head %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ru.js"></script>
<style>
  .filter-card {
    background: white;
    border-radius: 16px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    border: 1px solid #e5e7eb;
    transition: all 0.3s ease;
  }
  
  .property-card {
    background: white;
    border-radius: 16px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    border: 1px solid #f1f5f9;
    transition: all 0.3s ease;
    overflow: hidden;
  }
  
  .property-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 30px rgba(0,0,0,0.15);
  }
  
  .amenity-badge {
    background: #f1f5f9;
    color: #475569;
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 12px;
    margin: 2px;
    display: inline-block;
  }
  
  .price-badge {
    background: linear-gradient(135deg, #10b981, #059669);
    color: white;
    padding: 8px 16px;
    border-radius: 12px;
    font-weight: 600;
    display: inline-block;
  }
  
  .date-input {
    background: white;
    border: 2px solid #e5e7eb;
    border-radius: 12px;
    padding: 12px 16px;
    transition: all 0.3s ease;
  }
  
  .date-input:focus {
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  }
  
  .request-modal {
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(4px);
  }
</style>
{% endblock %}

{% block content %}
<div class="bg-gradient-to-br from-blue-50 to-cyan-50 min-h-screen">
  
  <!-- Hero —Å–µ–∫—Ü–∏—è -->
  <div class="bg-gradient-to-r from-blue-600 to-cyan-600 text-white py-16">
    <div class="max-w-7xl mx-auto px-4 text-center">
      <h1 class="text-4xl md:text-5xl font-bold mb-4">{{ _("rent.title") }}</h1>
      <p class="text-xl text-blue-100 max-w-2xl mx-auto">
        {{ _("rent.subtitle") }}
      </p>
    </div>
  </div>

  <div class="max-w-7xl mx-auto px-4 py-8">
    
    <!-- –§–∏–ª—å—Ç—Ä—ã -->
    <div class="filter-card p-6 mb-8">
      <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
        <span class="text-3xl mr-3">üîç</span>
        {{ _("rent.search_title") }}
      </h2>
      
      <form id="rentalFilters" class="space-y-6" onsubmit="searchRentals(); return false;">
        
        <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          <div>
            <label class="block text-sm font-medium text-slate-300 mb-2">üè† {{ _("forms.property_type") }}</label>
            <select name="property_type" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500">
              <option value="">{{ _("common.any_type") }}</option>
              <option value="apartment">{{ _("common.apartments") }}</option>
              <option value="villa">{{ _("common.villa") }}</option>
              <option value="townhouse">{{ _("property.types.townhouse") }}</option>
            </select>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">{{ _("rent.bedrooms_count") }}</label>
            <select name="bedrooms" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500">
              <option value="">{{ _("common.any_amount") }}</option>
              <option value="0">{{ _("common.studio") }}</option>
              <option value="1">{{ _("common.1_bedroom") }}</option>
              <option value="2">{{ _("common.2_bedrooms") }}</option>
              <option value="3">{{ _("common.3_bedrooms") }}</option>
              <option value="4">4+ {{ _("common.bedrooms") }}</option>
            </select>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">{{ _("rent.district") }}</label>
            <select name="district" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500">
              <option value="">{{ _("forms.any_district") }}</option>
              <option value="central_pattaya">{{ _("districts.central") }}</option>
              <option value="north_pattaya">{{ _("districts.north") }}</option>
              <option value="south_pattaya">{{ _("districts.south") }}</option>
              <option value="jomtien">{{ _("districts.jomtien") }}</option>
              <option value="naklua">{{ _("districts.naklua") }}</option>
              <option value="wong_amat">{{ _("districts.wongamat") }}</option>
            </select>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">{{ _("rent.rental_type") }}</label>
            <select name="rental_type" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500">
              <option value="">{{ _("rent.any_period") }}</option>
              <option value="daily">{{ _("rent.daily") }}</option>
              <option value="weekly">{{ _("rent.weekly") }}</option>
              <option value="monthly">{{ _("rent.monthly") }}</option>
              <option value="long_term">{{ _("rent.long_term") }}</option>
            </select>
          </div>
        </div>

        <!-- –ë—é–¥–∂–µ—Ç -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">{{ _("rent.budget_monthly") }}</label>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <input type="number" name="price_from" placeholder="{{ _('rent.from_placeholder') }}" 
                   class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500">
            <input type="number" name="price_to" placeholder="{{ _('rent.to_placeholder') }}" 
                   class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500">
          </div>
        </div>

        <!-- –î–∞—Ç—ã –∞—Ä–µ–Ω–¥—ã -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">{{ _("rent.rental_period") }}</label>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <input type="text" id="check_in" name="check_in" placeholder="{{ _('rent.check_in') }}" 
                     class="date-input w-full focus:outline-none" readonly>
            </div>
            <div>
              <input type="text" id="check_out" name="check_out" placeholder="{{ _('rent.check_out') }}" 
                     class="date-input w-full focus:outline-none" readonly>
            </div>
          </div>
        </div>

        <!-- –£–¥–æ–±—Å—Ç–≤–∞ -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-3">{{ _("rent.amenities") }}</label>
          <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3">
            <label class="flex items-center space-x-2 cursor-pointer">
              <input type="checkbox" name="amenities" value="pool" class="rounded">
              <span class="text-sm">üèä {{ _("amenities.pool") }}</span>
            </label>
            <label class="flex items-center space-x-2 cursor-pointer">
              <input type="checkbox" name="amenities" value="gym" class="rounded">
              <span class="text-sm">üí™ {{ _("amenities.gym") }}</span>
            </label>
            <label class="flex items-center space-x-2 cursor-pointer">
              <input type="checkbox" name="amenities" value="sea_view" class="rounded">
              <span class="text-sm">üåä {{ _("common.sea_view") }}</span>
            </label>
            <label class="flex items-center space-x-2 cursor-pointer">
              <input type="checkbox" name="amenities" value="parking" class="rounded">
              <span class="text-sm">üöó {{ _("amenities.parking") }}</span>
            </label>
            <label class="flex items-center space-x-2 cursor-pointer">
              <input type="checkbox" name="amenities" value="wifi" class="rounded">
              <span class="text-sm">üì∂ {{ _("amenities.wifi") }}</span>
            </label>
            <label class="flex items-center space-x-2 cursor-pointer">
              <input type="checkbox" name="amenities" value="air_con" class="rounded">
              <span class="text-sm">‚ùÑÔ∏è {{ _("amenities.air_con") }}</span>
            </label>
          </div>
        </div>

        <div class="flex items-center justify-between">
          <button type="button" onclick="clearFilters()" 
                  class="text-gray-600 hover:text-gray-800 underline">
            {{ _("rent.clear_filters") }}
          </button>
          <button type="submit" 
                  class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-medium transition-colors flex items-center gap-2">
            <span>üîç</span>
            {{ _("rent.find_objects") }}
          </button>
        </div>
      </form>
    </div>

    <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ -->
    <div id="searchResults">
      <!-- –ó–∞–≥–ª—É—à–∫–∞ –ø–æ–∫–∞ –Ω–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
      <div class="text-center py-16">
        <div class="text-6xl mb-4">üèñÔ∏è</div>
        <h3 class="text-2xl font-bold text-gray-900 mb-2">{{ _("forms.select_search_parameters") }}</h3>
        <p class="text-gray-600 mb-6">{{ _("forms.search_instruction") }}</p>
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 max-w-md mx-auto">
          <p class="text-blue-800 text-sm">
            {{ _("rent.tip_title") }} <strong>{{ _("rent.tip_text") }}</strong>
          </p>
        </div>
      </div>
    </div>

    <!-- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã -->
    <div class="mt-16">
      <h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">{{ _("rent.popular_objects") }}</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        <!-- –ü—Ä–∏–º–µ—Ä –∫–∞—Ä—Ç–æ—á–∫–∏ –æ–±—ä–µ–∫—Ç–∞ -->
        <div class="property-card">
          <div class="relative">
            <img src="/static/images/default.jpg" alt="–ö–æ–Ω–¥–æ" class="w-full h-48 object-cover">
            <div class="absolute top-4 left-4">
              <span class="price-badge">25,000 ‡∏ø/–º–µ—Å</span>
            </div>
            <div class="absolute top-4 right-4">
              <button onclick="openRequestModal('Luxury Condo Jomtien')" 
                      class="bg-white bg-opacity-90 hover:bg-opacity-100 text-gray-800 px-3 py-2 rounded-lg text-sm font-medium transition-all">
                {{ _("rent.contact") }}
              </button>
            </div>
          </div>
          
          <div class="p-6">
            <h3 class="text-xl font-bold text-gray-900 mb-2">Luxury Condo Jomtien</h3>
            <p class="text-gray-600 mb-3">üìç –î–∂–æ–º—Ç—å–µ–Ω, –≤ 50 –º–µ—Ç—Ä–∞—Ö –æ—Ç –ø–ª—è–∂–∞</p>
            <p class="text-gray-700 mb-4">–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã —Å –ø–æ—Ç—Ä—è—Å–∞—é—â–∏–º –≤–∏–¥–æ–º –Ω–∞ –º–æ—Ä–µ. 1 —Å–ø–∞–ª—å–Ω—è, –ø–æ–ª–Ω–æ—Å—Ç—å—é –º–µ–±–ª–∏—Ä–æ–≤–∞–Ω—ã.</p>
            
            <div class="flex flex-wrap gap-1 mb-4">
              <span class="amenity-badge">üèä –ë–∞—Å—Å–µ–π–Ω</span>
              <span class="amenity-badge">üí™ –§–∏—Ç–Ω–µ—Å</span>
              <span class="amenity-badge">üåä –í–∏–¥ –Ω–∞ –º–æ—Ä–µ</span>
              <span class="amenity-badge">üöó –ü–∞—Ä–∫–æ–≤–∫–∞</span>
            </div>
            
            <div class="flex items-center justify-between">
              <span class="text-sm text-gray-500">1 —Å–ø–∞–ª—å–Ω—è ‚Ä¢ 45 –º¬≤</span>
              <button onclick="openRequestModal('Luxury Condo Jomtien')" 
                      class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm transition-colors">
                {{ _("rent.book") }}
              </button>
            </div>
          </div>
        </div>

        <!-- –ï—â–µ –ø—Ä–∏–º–µ—Ä—ã -->
        <div class="property-card">
          <div class="relative">
            <img src="/static/images/default.jpg" alt="–í–∏–ª–ª–∞" class="w-full h-48 object-cover">
            <div class="absolute top-4 left-4">
              <span class="price-badge">85,000 ‡∏ø/–º–µ—Å</span>
            </div>
            <div class="absolute top-4 right-4">
              <button onclick="openRequestModal('Villa Central Pattaya')" 
                      class="bg-white bg-opacity-90 hover:bg-opacity-100 text-gray-800 px-3 py-2 rounded-lg text-sm font-medium transition-all">
                üìû –°–≤—è–∑–∞—Ç—å—Å—è
              </button>
            </div>
          </div>
          
          <div class="p-6">
            <h3 class="text-xl font-bold text-gray-900 mb-2">Villa Central Pattaya</h3>
            <p class="text-gray-600 mb-3">üìç –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ü–∞—Ç—Ç–∞–π—è</p>
            <p class="text-gray-700 mb-4">–†–æ—Å–∫–æ—à–Ω–∞—è –≤–∏–ª–ª–∞ —Å —á–∞—Å—Ç–Ω—ã–º –±–∞—Å—Å–µ–π–Ω–æ–º. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Å–µ–º–µ–π–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞ –∏–ª–∏ –∫–æ–º–ø–∞–Ω–∏–∏ –¥—Ä—É–∑–µ–π.</p>
            
            <div class="flex flex-wrap gap-1 mb-4">
              <span class="amenity-badge">üèä –ß–∞—Å—Ç–Ω—ã–π –±–∞—Å—Å–µ–π–Ω</span>
              <span class="amenity-badge">üè† 3 —Å–ø–∞–ª—å–Ω–∏</span>
              <span class="amenity-badge">üå¥ –°–∞–¥</span>
              <span class="amenity-badge">üöó –ü–∞—Ä–∫–æ–≤–∫–∞</span>
            </div>
            
            <div class="flex items-center justify-between">
              <span class="text-sm text-gray-500">3 —Å–ø–∞–ª—å–Ω–∏ ‚Ä¢ 180 –º¬≤</span>
              <button onclick="openRequestModal('Villa Central Pattaya')" 
                      class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm transition-colors">
                –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å
              </button>
            </div>
          </div>
        </div>

        <div class="property-card">
          <div class="relative">
            <img src="/static/images/default.jpg" alt="–°—Ç—É–¥–∏—è" class="w-full h-48 object-cover">
            <div class="absolute top-4 left-4">
              <span class="price-badge">18,000 ‡∏ø/–º–µ—Å</span>
            </div>
            <div class="absolute top-4 right-4">
              <button onclick="openRequestModal('Modern Studio Naklua')" 
                      class="bg-white bg-opacity-90 hover:bg-opacity-100 text-gray-800 px-3 py-2 rounded-lg text-sm font-medium transition-all">
                üìû –°–≤—è–∑–∞—Ç—å—Å—è
              </button>
            </div>
          </div>
          
          <div class="p-6">
            <h3 class="text-xl font-bold text-gray-900 mb-2">Modern Studio Naklua</h3>
            <p class="text-gray-600 mb-3">üìç –ù–∞–∫–ª—É–∞, —Ç–∏—Ö–∏–π —Ä–∞–π–æ–Ω</p>
            <p class="text-gray-700 mb-4">–£—é—Ç–Ω–∞—è —Å—Ç—É–¥–∏—è –¥–ª—è –æ–¥–Ω–æ–≥–æ –∏–ª–∏ –ø–∞—Ä—ã. –û—Ç–ª–∏—á–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ü–µ–Ω—ã –∏ –∫–∞—á–µ—Å—Ç–≤–∞.</p>
            
            <div class="flex flex-wrap gap-1 mb-4">
              <span class="amenity-badge">üì∂ Wi-Fi</span>
              <span class="amenity-badge">‚ùÑÔ∏è –ö–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä</span>
              <span class="amenity-badge">üç¥ –ö—É—Ö–Ω—è</span>
              <span class="amenity-badge">üèä –û–±—â–∏–π –±–∞—Å—Å–µ–π–Ω</span>
            </div>
            
            <div class="flex items-center justify-between">
              <span class="text-sm text-gray-500">–°—Ç—É–¥–∏—è ‚Ä¢ 32 –º¬≤</span>
              <button onclick="openRequestModal('Modern Studio Naklua')" 
                      class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm transition-colors">
                –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∞—Ä–µ–Ω–¥—ã —Å –Ω–∞–º–∏ -->
    <div class="bg-white rounded-2xl p-8 mt-16">
      <h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">{{ _("rent.why_choose_us") }}</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        <div class="text-center p-6">
          <div class="text-4xl mb-4">üèÜ</div>
          <h3 class="text-lg font-bold text-gray-900 mb-2">{{ _("rent.verified_properties") }}</h3>
          <p class="text-gray-600 text-sm">{{ _("rent.verified_desc") }}</p>
        </div>
        
        <div class="text-center p-6">
          <div class="text-4xl mb-4">üí¨</div>
          <h3 class="text-lg font-bold text-gray-900 mb-2">{{ _("rent.support_24_7") }}</h3>
          <p class="text-gray-600 text-sm">{{ _("rent.support_desc") }}</p>
        </div>
        
        <div class="text-center p-6">
          <div class="text-4xl mb-4">üí≥</div>
          <h3 class="text-lg font-bold text-gray-900 mb-2">{{ _("rent.transparent_prices") }}</h3>
          <p class="text-gray-600 text-sm">{{ _("rent.transparent_desc") }}</p>
        </div>
        
        <div class="text-center p-6">
          <div class="text-4xl mb-4">üöó</div>
          <h3 class="text-lg font-bold text-gray-900 mb-2">{{ _("rent.free_transfer") }}</h3>
          <p class="text-gray-600 text-sm">{{ _("rent.transfer_desc") }}</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞—è–≤–∫–∏ -->
<div id="requestModal" class="request-modal fixed inset-0 z-50 hidden flex items-center justify-center p-4">
  <div class="bg-white rounded-2xl max-w-md w-full p-6 transform transition-all">
    <div class="flex items-center justify-between mb-6">
      <h3 class="text-xl font-bold text-gray-900">{{ _("rent.request_modal") }}</h3>
      <button onclick="closeRequestModal()" class="text-gray-400 hover:text-gray-600">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>
    
    <form onsubmit="submitRentalRequest(); return false;" class="space-y-4">
      <input type="hidden" id="propertyName" name="property_name">
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">{{ _("rent.your_name") }}</label>
        <input type="text" name="name" required 
               class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500">
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">{{ _("rent.phone") }}</label>
        <input type="tel" name="phone" required placeholder="+66 –∏–ª–∏ +7" 
               class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500">
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">{{ _("rent.whatsapp") }}</label>
        <input type="tel" name="whatsapp" placeholder="+66123456789" 
               class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500">
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">{{ _("rent.telegram") }}</label>
        <input type="text" name="telegram" placeholder="@username" 
               class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500">
      </div>
      
      <div class="grid grid-cols-2 gap-3">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">{{ _("rent.check_in") }}</label>
          <input type="text" name="check_in_date" id="modalCheckIn" 
                 class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500" readonly>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">{{ _("rent.check_out") }}</label>
          <input type="text" name="check_out_date" id="modalCheckOut" 
                 class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500" readonly>
        </div>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">{{ _("rent.guests") }}</label>
        <select name="guests" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500">
          <option value="1">1 —á–µ–ª–æ–≤–µ–∫</option>
          <option value="2">2 —á–µ–ª–æ–≤–µ–∫–∞</option>
          <option value="3">3 —á–µ–ª–æ–≤–µ–∫–∞</option>
          <option value="4">4 —á–µ–ª–æ–≤–µ–∫–∞</option>
          <option value="5+">5+ —á–µ–ª–æ–≤–µ–∫</option>
        </select>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">{{ _("rent.comment") }}</label>
        <textarea name="message" rows="3" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è..." 
                  class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500"></textarea>
      </div>
      
      <div class="flex items-center justify-end gap-3 pt-4">
        <button type="button" onclick="closeRequestModal()" 
                class="px-4 py-2 text-gray-600 hover:text-gray-800">
          {{ _("rent.cancel") }}
        </button>
        <button type="submit" 
                class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors">
          {{ _("rent.submit_request") }}
        </button>
      </div>
    </form>
  </div>
</div>

<script>
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–π
document.addEventListener('DOMContentLoaded', function() {
  // –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è –¥–∞—Ç
  flatpickr("#check_in", {
    locale: "ru",
    dateFormat: "d.m.Y",
    minDate: "today",
    onChange: function(selectedDates, dateStr, instance) {
      if (selectedDates[0]) {
        document.getElementById('check_out')._flatpickr.set('minDate', selectedDates[0]);
      }
    }
  });
  
  flatpickr("#check_out", {
    locale: "ru",
    dateFormat: "d.m.Y",
    minDate: "today"
  });
  
  // –ü–æ–ª—è –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
  flatpickr("#modalCheckIn", {
    locale: "ru",
    dateFormat: "d.m.Y",
    minDate: "today",
    onChange: function(selectedDates, dateStr, instance) {
      if (selectedDates[0]) {
        document.getElementById('modalCheckOut')._flatpickr.set('minDate', selectedDates[0]);
      }
    }
  });
  
  flatpickr("#modalCheckOut", {
    locale: "ru",
    dateFormat: "d.m.Y",
    minDate: "today"
  });
});

// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–∞–ª—å–Ω—ã–º –æ–∫–Ω–æ–º
function openRequestModal(propertyName) {
  document.getElementById('propertyName').value = propertyName;
  document.getElementById('requestModal').classList.remove('hidden');
  document.body.style.overflow = 'hidden';
}

function closeRequestModal() {
  document.getElementById('requestModal').classList.add('hidden');
  document.body.style.overflow = 'auto';
}

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ –æ–±–ª–∞—Å—Ç–∏
document.getElementById('requestModal').addEventListener('click', function(e) {
  if (e.target === this) {
    closeRequestModal();
  }
});

function submitRentalRequest() {
  // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –ª–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
  alert('–í–∞—à–∞ –∑–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.');
  closeRequestModal();
}

function clearFilters() {
  document.getElementById('rentalFilters').reset();
  // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ—á–∏—Å—Ç–∫–∏, –µ—Å–ª–∏ –Ω—É–∂–Ω–∞
}

function searchRentals() {
  // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –ª–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞
  alert('–§—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ');
}
</script>
{% endblock %} 